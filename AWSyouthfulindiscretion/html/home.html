<!DOCTYPE html>
<html>
<head>
<script type='text/javascript' src='../js/add.js'></script>
<script type='text/javascript' src='../js/create.js'></script>
<script type='text/javascript' src='../js/delete.js'></script>
<script type='text/javascript' src='../js/getVideoSegment.js'></script>
<script type='text/javascript' src='../js/getConstant.js'></script>

<script type="text/javascript">
	function initialize() {

		// get all of the playlists (?) and video segments (?)
		refreshConstantsList();
	}
	/**
	 * Refresh constant list from server
	 *
	 *    GET list_url
	 *    RESPONSE  list of [name, value] constants 
	 */
	function refreshConstantsList() {

		list_url="https://3733youthfulindiscretion.s3.us-east-2.amazonaws.com/videoSegments/Are+you(Kirk).mp4";
		var xhr = new XMLHttpRequest();
		xhr.open("GET", list_url, true);
		xhr.send();

		console.log("sent");

		// This will process results and update HTML as appropriate. 
		xhr.onloadend = function () {
			if (xhr.readyState == XMLHttpRequest.DONE) {
				console.log ("XHR:" + xhr.responseText);
				processListResponse(xhr.responseText);
			} else {
				processListResponse("N/A");
			}
		};
	}

	/**
	 * Respond to server JSON object.
	 *
	 * Replace the contents of 'constantList' with a <br>-separated list of name,value pairs.
	 */
	function processListResponse(result) {
		console.log("res:" + result);
		// Can grab any DIV or SPAN HTML element and can then manipulate its contents dynamically via javascript
		var js = JSON.parse(result);
		var constList = document.getElementById('PlaylistList');

		var output = "";
		for (var i = 0; i < js.list.length; i++) {
			var constantJson = js.list[i];
			console.log(constantJson);

			var cname = constantJson["name"];
			var cval = constantJson["value"];
			var sysvar = constantJson["system"];
			if (sysvar) {
				output = output + "<div id=\"const" + cname + "\"><b>" + cname + ":</b> = " + cval + "<br></div>";
			} else {
				output = output + "<div id=\"const" + cname + "\"><b>" + cname + ":</b> = " + cval + "(<a href='javaScript:requestDelete(\"" + cname + "\")'>;
			}
		}

		// Update computation result
		constList.innerHTML = output;
	}


</script>
</head>


<body onload="initialize()">
<body>
	<h1>Playlist App</h1>

	<h2>Playlists:</h2>
	<button type="button" onClick="JavaScript:handleCreateClick(this)">Create New Playlist</button>
	<button type="button" onClick="JavaScript:handleDeleteClick(this)">Delete Playlist</button>
	<!--  get and display the current playlists -->
	
	<div id="PlaylistList"></div>
	
	<p>Playlist 1</p>
	<p>Playlist 2</p>
	
	
	<h2>Video Segments:</h2>
	
	<div id="VideoSegments"></div>
	
	<video id="video1" width="300" height="220" controls>
		<source
			src="https://3733youthfulindiscretion.s3.us-east-2.amazonaws.com/videoSegments/Are+you(Kirk).mp4"
			type="video/mp4">

	</video>
	
	<h3>Upload Video Segments</h3>

	<!--Figure out the JavaScript:handleAddClick(this) for submiting a playlist  -->
	<form name="addForm" method="post">
		<input name="arg1" value="Character" /><input name="arg2"
			value="Phrase" onClick="JavaScript:handleAddClick(this)" />
	</form>
	<form id="uploadFile" method="post" action="#">
		<input id="fileupload" type="file" /> <input type="submit"
			value="Submit" id="submit" />
	</form>

	<h3>Search Video Segment</h3>
	<input name="arg1" value="Character" />
	<input name="arg2" value="Phrase" />
	<input type="button" value="Submit"
		onClick="JavaScript:handleSearchClick(this)">

</body>
</html>
